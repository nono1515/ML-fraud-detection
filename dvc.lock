schema: '2.0'
stages:
  split:
    cmd: python src/split.py data/creditcard.csv data/split params.yaml
    deps:
    - path: data/creditcard.csv
      hash: md5
      md5: e90efcb83d69faf99fcab8b0255024de
      size: 150828752
    - path: src/split.py
      hash: md5
      md5: 33254e12c7a77d41c86b04c2d0f56c26
      size: 1510
    params:
      params.yaml:
        split:
          test_size: 0.2
          random_state: 123456
    outs:
    - path: data/split
      hash: md5
      md5: 8822ff6884be02789b0fdef15483e150.dir
      size: 150817718
      nfiles: 2
  train:
    cmd: python src/train.py data/prepared/train.csv model.json params.yaml
    deps:
    - path: data/prepared/train.csv
      hash: md5
      md5: d0e7326d705089e26e1a082dd4843ba6
      size: 120653265
    - path: src/train.py
      hash: md5
      md5: d285eeb733b5a874354af3e68dd7c52f
      size: 4638
    params:
      params.yaml:
        train:
          k_fold: 5
          random_state: 123456
          target_col: Class
          xgb_params:
            device: gpu
            eta: 0.3
            max_depth: 6
            subsample: 0.5
            colsample_bytree: 0.8
            lambda: 1
            alpha: 0
            objective: binary:logistic
    outs:
    - path: metrics/validation.json
      hash: md5
      md5: 3a4936678ee6f0ec791113b99c3116b4
      size: 132
    - path: model.json
      hash: md5
      md5: 895d788387658284242699ba1ef6a56a
      size: 210216
    - path: plots/cm
      hash: md5
      md5: 43b73f65dc8604140213a3bfed746759.dir
      size: 8653481
      nfiles: 2
    - path: plots/prc
      hash: md5
      md5: 128b45fccbfaa096481f18b18f6e7d7f.dir
      size: 22167982
      nfiles: 1
  prepare:
    cmd: python src/prepare.py data/split data/prepared params.yaml
    deps:
    - path: data/split
      hash: md5
      md5: 8822ff6884be02789b0fdef15483e150.dir
      size: 150817718
      nfiles: 2
    - path: src/prepare.py
      hash: md5
      md5: ca8fbbae2b8229a2d1f2361b15281a3d
      size: 1560
    params:
      params.yaml:
        prepare:
          features_to_keep:
    outs:
    - path: data/prepared
      hash: md5
      md5: 8822ff6884be02789b0fdef15483e150.dir
      size: 150817718
      nfiles: 2
