schema: '2.0'
stages:
  split:
    cmd: python src/split.py data/creditcard.csv data/split params.yaml
    deps:
    - path: data/creditcard.csv
      hash: md5
      md5: e90efcb83d69faf99fcab8b0255024de
      size: 150828752
    - path: src/split.py
      hash: md5
      md5: 09eb779d11fdeaf9621d21561ea0a703
      size: 1557
    params:
      params.yaml:
        split:
          test_size: 0.2
          random_state: 123456
    outs:
    - path: data/split
      hash: md5
      md5: 2c79dca908c46dfdcaa47d79773c39d4.dir
      size: 151102527
      nfiles: 2
  train:
    cmd: python src/train.py data/prepared/train.csv model.json params.yaml
    deps:
    - path: data/prepared/train.csv
      hash: md5
      md5: 206041fd4c8ecc6d88301ef7295e2ffb
      size: 47765550
    - path: src/train.py
      hash: md5
      md5: ee1858b1bdf4254f66d9455ee536f79e
      size: 4765
    params:
      params.yaml:
        train:
          k_fold: 5
          random_state: 123456
          target_col: Class
          xgb_params:
            device: gpu
            eta: 0.3
            max_depth: 6
            subsample: 0.5
            colsample_bytree: 0.8
            lambda: 1
            alpha: 0
            objective: binary:logistic
    outs:
    - path: metrics/validation.json
      hash: md5
      md5: 61ba3ea5d25df1da5035c618ebef7d4f
      size: 148
    - path: model.json
      hash: md5
      md5: 81d80020016a003d0dc79a96e2c02b8c
      size: 232334
    - path: plots/cm
      hash: md5
      md5: ec7ef625c6119efac13b8544aa83f855.dir
      size: 9109200
      nfiles: 2
    - path: plots/prc
      hash: md5
      md5: 26e870b73708af1cd3819c168495b5e5.dir
      size: 22212752
      nfiles: 1
  prepare:
    cmd: python src/prepare.py data/split data/prepared params.yaml
    deps:
    - path: data/split
      hash: md5
      md5: 2c79dca908c46dfdcaa47d79773c39d4.dir
      size: 151102527
      nfiles: 2
    - path: src/prepare.py
      hash: md5
      md5: 195edacd736fc4708d5b033324500280
      size: 1609
    params:
      params.yaml:
        prepare:
          features_to_keep:
          - Class
          - V4
          - V14
          - V10
          - V12
          - Amount
          - V18
          - V7
          - V17
          - V16
          - V19
          - V15
          - V26
    outs:
    - path: data/prepared
      hash: md5
      md5: a7d4203b0d26a773206032ffa37bb9ed.dir
      size: 59707324
      nfiles: 2
